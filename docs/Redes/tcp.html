<!doctype html>
<html lang="es" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Redes/tcp">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">TCP Server-Client en C | Lenguajes Estrucuturados</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://abelranni.github.io/lenguajes-estructurados/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://abelranni.github.io/lenguajes-estructurados/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://abelranni.github.io/lenguajes-estructurados/docs/Redes/tcp"><meta data-rh="true" name="docusaurus_locale" content="es"><meta data-rh="true" name="docsearch:language" content="es"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TCP Server-Client en C | Lenguajes Estrucuturados"><meta data-rh="true" name="description" content="Lenguajes Estructurados"><meta data-rh="true" property="og:description" content="Lenguajes Estructurados"><link data-rh="true" rel="icon" href="/lenguajes-estructurados/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://abelranni.github.io/lenguajes-estructurados/docs/Redes/tcp"><link data-rh="true" rel="alternate" href="https://abelranni.github.io/lenguajes-estructurados/docs/Redes/tcp" hreflang="es"><link data-rh="true" rel="alternate" href="https://abelranni.github.io/lenguajes-estructurados/docs/Redes/tcp" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/lenguajes-estructurados/blog/rss.xml" title="Lenguajes Estrucuturados RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/lenguajes-estructurados/blog/atom.xml" title="Lenguajes Estrucuturados Atom Feed"><link rel="stylesheet" href="/lenguajes-estructurados/assets/css/styles.7cf80947.css">
<link rel="preload" href="/lenguajes-estructurados/assets/js/runtime~main.bc049932.js" as="script">
<link rel="preload" href="/lenguajes-estructurados/assets/js/main.83e75c52.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Saltar al contenido principal"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Saltar al contenido principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/lenguajes-estructurados/"><div class="navbar__logo"><img src="/lenguajes-estructurados/img/docabr.png" alt="Abel Ranni" class="themedImage_ToTc themedImage--light_HNdA"><img src="/lenguajes-estructurados/img/docabr.png" alt="Abel Ranni" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Lenguajes Estrucuturados</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/lenguajes-estructurados/docs/intro">Contenido</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/abelranni/lenguajes-estructurados" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Volver al principio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lenguajes-estructurados/docs/intro">Introducción</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/lenguajes-estructurados/docs/category/00---configuración">00 - Configuración</a><button aria-label="Toggle the collapsible sidebar category &#x27;00 - Configuración&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/lenguajes-estructurados/docs/category/01---introducción">01 - Introducción</a><button aria-label="Toggle the collapsible sidebar category &#x27;01 - Introducción&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/lenguajes-estructurados/docs/category/02---lenguaje-c">02 - Lenguaje C</a><button aria-label="Toggle the collapsible sidebar category &#x27;02 - Lenguaje C&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/lenguajes-estructurados/docs/category/03---ejercicios-resueltos">03 - Ejercicios Resueltos</a><button aria-label="Toggle the collapsible sidebar category &#x27;03 - Ejercicios Resueltos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/lenguajes-estructurados/docs/category/04---redes">04 - Redes</a><button aria-label="Toggle the collapsible sidebar category &#x27;04 - Redes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/lenguajes-estructurados/docs/Redes/tcp">TCP Server-Client en C</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/lenguajes-estructurados/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/lenguajes-estructurados/docs/category/04---redes"><span itemprop="name">04 - Redes</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">TCP Server-Client en C</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">En esta página</button></div><div class="theme-doc-markdown markdown"><h1>TCP Server-Client en C</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lenguajes-estructurados">Lenguajes Estructurados<a href="#lenguajes-estructurados" class="hash-link" aria-label="Enlace directo al Lenguajes Estructurados" title="Enlace directo al Lenguajes Estructurados">​</a></h2><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="qué-es-la-programación-de-sockets">¿Qué es la programación de sockets?<a href="#qué-es-la-programación-de-sockets" class="hash-link" aria-label="Enlace directo al ¿Qué es la programación de sockets?" title="Enlace directo al ¿Qué es la programación de sockets?">​</a></h2><p>La programación de sockets es una forma de conectar dos nodos en una red para comunicarse entre sí.</p><p>Un socket (nodo) escucha en un puerto particular en una IP, mientras que el otro socket se extiende hacia el otro para formar una conexión.</p><p>El servidor forma el socket de escucha mientras el cliente se acerca al servidor.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="diagrama-de-estado-para-el-modelo-de-servidor-y-cliente">Diagrama de estado para el modelo de servidor y cliente<a href="#diagrama-de-estado-para-el-modelo-de-servidor-y-cliente" class="hash-link" aria-label="Enlace directo al Diagrama de estado para el modelo de servidor y cliente" title="Enlace directo al Diagrama de estado para el modelo de servidor y cliente">​</a></h3><p><img loading="lazy" src="/lenguajes-estructurados/assets/images/StatediagramforserverandclientmodelofSocketdrawio-796f269708a293c6cc305fe22428c94e.webp" width="448" height="609" class="img_ev3q"></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="etapas-para-el-servidor">Etapas para el servidor<a href="#etapas-para-el-servidor" class="hash-link" aria-label="Enlace directo al Etapas para el servidor" title="Enlace directo al Etapas para el servidor">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-creación-de-sockets">1<!-- -->.<!-- --> Creación de sockets<a href="#1-creación-de-sockets" class="hash-link" aria-label="Enlace directo al 1-creación-de-sockets" title="Enlace directo al 1-creación-de-sockets">​</a></h3><blockquote><p>int sockfd = socket(dominio, tipo, protocolo)</p></blockquote><ul><li><strong>sockfd:</strong> descriptor de socket, un entero (como un identificador de archivo)</li><li><strong>dominio:</strong> entero, especifica el dominio de comunicación. Utilizamos AF<!-- -->_<!-- --> LOCAL como se define en el estándar POSIX para la comunicación entre procesos en el mismo host. Para la comunicación entre procesos en diferentes hosts conectados por IPV4, utilizamos AF<!-- -->_<!-- -->INET y AF<!-- -->_<!-- -->I NET 6 para procesos conectados por IPV6.</li><li><strong>tipo</strong>: comunicación tipo SOCK<!-- -->_<!-- -->STREAM: TCP (confiable, orientado a la conexión) SOCK<!-- -->_<!-- -->DGRAM: UDP (no confiable, sin conexión)</li><li><strong>protocolo:</strong> Valor de protocolo para Protocolo de Internet (IP), que es 0. Este es el mismo número que aparece en el campo de protocolo en el encabezado IP de un paquete.</li></ul><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-setsockopt">2<!-- -->.<!-- --> Setsockopt<a href="#2-setsockopt" class="hash-link" aria-label="Enlace directo al 2-setsockopt" title="Enlace directo al 2-setsockopt">​</a></h3><p>Esto ayuda a manipular las opciones para el socket referido por el descriptor de archivo sockfd. Esto es completamente opcional, pero ayuda en la reutilización de la dirección y el puerto. Evita errores como: &quot;dirección ya en uso&quot;.</p><blockquote><p>int setsockopt(int sockfd, int level, int optname,  const void <!-- -->*<!-- -->optval, socklen<!-- -->_<!-- -->t optlen);</p></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-vincular">3<!-- -->.<!-- --> Vincular<a href="#3-vincular" class="hash-link" aria-label="Enlace directo al 3-vincular" title="Enlace directo al 3-vincular">​</a></h3><blockquote><p>int bind(int sockfd, const struct sockaddr <!-- -->*<!-- -->addr, socklen<!-- -->_<!-- -->t addrlen);</p></blockquote><p>Después de la creación del socket, la función bind enlaza el socket a la dirección y al número de puerto especificados en addr (estructura de datos personalizada). En el código de ejemplo, vinculamos el servidor al localhost, por lo tanto, usamos INADDR<!-- -->_<!-- -->ANY para especificar la dirección IP.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-escuchar">4<!-- -->.<!-- --> Escuchar<a href="#4-escuchar" class="hash-link" aria-label="Enlace directo al 4-escuchar" title="Enlace directo al 4-escuchar">​</a></h3><blockquote><p>int listen(int sockfd, int backlog);</p></blockquote><p>Pone el socket del servidor en modo pasivo, donde espera a que el cliente se acerque al servidor para realizar una conexión. El backlog, define la longitud máxima a la que puede crecer la cola de conexiones pendientes para sockfd. Si una solicitud de conexión llega cuando la cola está llena, el cliente puede recibir un error con una indicación de ECONNREFUSED.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-aceptar">5<!-- -->.<!-- --> Aceptar<a href="#5-aceptar" class="hash-link" aria-label="Enlace directo al 5-aceptar" title="Enlace directo al 5-aceptar">​</a></h3><blockquote><p>int new<!-- -->_<!-- -->socket= accept(int sockfd, struct sockaddr <!-- -->*<!-- -->addr, socklen<!-- -->_<!-- -->t <!-- -->*<!-- -->addrlen);</p></blockquote><p>Extrae la primera solicitud de conexión en la cola de conexiones pendientes para el socket de escucha, sockfd, crea un nuevo socket conectado y devuelve un nuevo descriptor de archivo que hace referencia a ese socket. En este punto, la conexión se establece entre el cliente y el servidor, y están listos para transferir datos.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="etapas-para-el-cliente">Etapas para el cliente<a href="#etapas-para-el-cliente" class="hash-link" aria-label="Enlace directo al Etapas para el cliente" title="Enlace directo al Etapas para el cliente">​</a></h2><ul><li><strong>Conexión de socket:</strong> Exactamente igual que el de la creación del socket del servidor</li><li><strong>Conectar:</strong> La llamada al sistema connect() conecta el socket al que hace referencia el descriptor de archivo sockfd a la dirección especificada por addr. La dirección y el puerto del servidor se especifican en addr.</li></ul><blockquote><p>int connect(int sockfd, const struct sockaddr <!-- -->*<!-- -->addr, socklen<!-- -->_<!-- -->t addrlen);</p></blockquote><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementación-tcp-server-client-en-c">Implementación TCP Server-Client en C<a href="#implementación-tcp-server-client-en-c" class="hash-link" aria-label="Enlace directo al Implementación TCP Server-Client en C" title="Enlace directo al Implementación TCP Server-Client en C">​</a></h2><p>El protocolo TCP utilizado por otros protocolos como HTTP, HTTPs, FTP, SMTP, Telnet.</p><p>TCP reorganiza los paquetes de datos en el orden especificado. Existe una garantía absoluta de que los datos transferidos permanecen intactos y llegan en el mismo orden en que fueron enviados.</p><p>TCP realiza el control de flujo y requiere tres paquetes para configurar una conexión de socket antes de que se puedan enviar datos de usuario.</p><p>TCP maneja la confiabilidad y el control de congestión. También realiza la comprobación de errores y la recuperación de errores. Los paquetes erróneos se retransmiten desde el origen al destino.</p><hr><p>Todo el proceso se puede dividir en los siguientes pasos:</p><p><img loading="lazy" src="/lenguajes-estructurados/assets/images/Socket_server-1-8350816d55722a6fe467fad45a7b980f.png" width="330" height="375" class="img_ev3q"></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="servidor-tcp">Servidor TCP<a href="#servidor-tcp" class="hash-link" aria-label="Enlace directo al Servidor TCP" title="Enlace directo al Servidor TCP">​</a></h3><ol><li>create(): Crear socket TCP.</li><li>bind(): Enlazar el socket a la dirección del servidor.</li><li>listen(): dejar el socket del servidor en modo pasivo, donde espera a que el cliente se solicite al servidor establecer una conexión</li><li>accept(): en este punto, se establece la conexión entre el cliente y el servidor, y están listos para transferir datos.</li><li>volver al paso 3.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cliente-tcp">Cliente TCP<a href="#cliente-tcp" class="hash-link" aria-label="Enlace directo al Cliente TCP" title="Enlace directo al Cliente TCP">​</a></h3><ol><li>Crear socket TCP.</li><li>Conectar el socket de cliente recién creado al servidor.</li></ol><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compilar-y-ejecutar">Compilar y ejecutar<a href="#compilar-y-ejecutar" class="hash-link" aria-label="Enlace directo al Compilar y ejecutar" title="Enlace directo al Compilar y ejecutar">​</a></h3><p>Lado del servidor:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc tcp_server.c -o tcp_server.exe -lws2_32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Lado del cliente:  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gcc tcp_client.c -o tcp_client.exe -lws2_32</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="salida">Salida<a href="#salida" class="hash-link" aria-label="Enlace directo al Salida" title="Enlace directo al Salida">​</a></h3><hr><p>Lado del servidor:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Socket successfully created</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Socket successfully binded</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server listening</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server accept the client</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">From client: hi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     To client </span><span class="token builtin class-name">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">From client: </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     To client </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server Exit</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Lado del cliente:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Socket successfully created</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">connected to the server</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter the string </span><span class="token builtin class-name">:</span><span class="token plain"> hi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">From Server </span><span class="token builtin class-name">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter the string </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">From Server </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Client Exit</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="inicialización-de-winsock-para-windows">Inicialización de Winsock para Windows<a href="#inicialización-de-winsock-para-windows" class="hash-link" aria-label="Enlace directo al Inicialización de Winsock para Windows" title="Enlace directo al Inicialización de Winsock para Windows">​</a></h2><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">WSADATA wsaData</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Esta línea declara una variable wsaData de tipo WSADATA.
La estructura WSADATA contiene información sobre la implementación de la biblioteca Winsock.
Se utiliza para almacenar detalles sobre la versión de Winsock en uso y otra información relevante.</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> iResult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">WSAStartup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">MAKEWORD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">wsaData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p>La función WSAStartup es la primera función que debe ser llamada antes de utilizar cualquier otra función de la biblioteca Winsock en un programa de Windows.</p><p>La función inicializa la biblioteca Winsock y proporciona información sobre la versión de Winsock disponible en el sistema. WSAStartup toma dos argumentos:</p><ul><li><p>El primer argumento, MAKEWORD(2, 2), especifica la versión de Winsock que el programa solicita. En este caso, estamos solicitando la versión 2.2 de Winsock. La macro MAKEWORD toma dos valores enteros (en este caso, 2 y 2) y los combina en un solo valor de tipo WORD. La función WSAStartup utiliza este valor para determinar si la versión de Winsock solicitada es compatible con la versión instalada en el sistema.</p></li><li><p>El segundo argumento, &amp;wsaData, es un puntero a la variable wsaData de tipo WSADATA declarada previamente. La función WSAStartup completa la estructura WSADATA con detalles sobre la implementación de Winsock en el sistema.</p></li></ul><hr><p>El valor de retorno de WSAStartup se almacena en la variable iResult. Si iResult es 0, significa que la función se ejecutó correctamente y la biblioteca Winsock se inicializó con éxito.
Si iResult es diferente de 0, hubo un error al inicializar Winsock.</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">iResult </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;WSAStartup failed with error: %d\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> iResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Esta parte del código verifica si iResult es diferente de 0, lo que indica un error al inicializar Winsock. Si hay un error, imprime un mensaje en la consola informando sobre el error y luego retorna 1, lo que termina la ejecución del programa.
Si iResult es 0, la función WSAStartup se ejecutó correctamente y el programa puede continuar utilizando la biblioteca Winsock.</p><hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/abelranni/lenguajes-estructurados/tree/main/wewbsite/docs/04 - Redes/tcp.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Editar esta página</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Navegación de páginas de documentos"><a class="pagination-nav__link pagination-nav__link--prev" href="/lenguajes-estructurados/docs/category/04---redes"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">04 - Redes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lenguajes-estructurados" class="table-of-contents__link toc-highlight">Lenguajes Estructurados</a></li><li><a href="#qué-es-la-programación-de-sockets" class="table-of-contents__link toc-highlight">¿Qué es la programación de sockets?</a><ul><li><a href="#diagrama-de-estado-para-el-modelo-de-servidor-y-cliente" class="table-of-contents__link toc-highlight">Diagrama de estado para el modelo de servidor y cliente</a></li><li><a href="#etapas-para-el-servidor" class="table-of-contents__link toc-highlight">Etapas para el servidor</a></li><li><a href="#1-creación-de-sockets" class="table-of-contents__link toc-highlight">1. Creación de sockets</a></li><li><a href="#2-setsockopt" class="table-of-contents__link toc-highlight">2. Setsockopt</a></li><li><a href="#3-vincular" class="table-of-contents__link toc-highlight">3. Vincular</a></li><li><a href="#4-escuchar" class="table-of-contents__link toc-highlight">4. Escuchar</a></li><li><a href="#5-aceptar" class="table-of-contents__link toc-highlight">5. Aceptar</a></li></ul></li><li><a href="#etapas-para-el-cliente" class="table-of-contents__link toc-highlight">Etapas para el cliente</a></li><li><a href="#implementación-tcp-server-client-en-c" class="table-of-contents__link toc-highlight">Implementación TCP Server-Client en C</a><ul><li><a href="#servidor-tcp" class="table-of-contents__link toc-highlight">Servidor TCP</a></li><li><a href="#cliente-tcp" class="table-of-contents__link toc-highlight">Cliente TCP</a></li><li><a href="#compilar-y-ejecutar" class="table-of-contents__link toc-highlight">Compilar y ejecutar</a></li><li><a href="#salida" class="table-of-contents__link toc-highlight">Salida</a></li></ul></li><li><a href="#inicialización-de-winsock-para-windows" class="table-of-contents__link toc-highlight">Inicialización de Winsock para Windows</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/lenguajes-estructurados/docs/intro">Contenido</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/abelranni/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/abelranni" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/abelranni/lenguajes-estructurados" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Abel Ranni - Built with Docusaurus.</div></div></div></footer></div>
<script src="/lenguajes-estructurados/assets/js/runtime~main.bc049932.js"></script>
<script src="/lenguajes-estructurados/assets/js/main.83e75c52.js"></script>
</body>
</html>